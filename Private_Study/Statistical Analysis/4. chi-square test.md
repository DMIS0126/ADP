# 밑바닥부터 시작하는 통계분석 (4) 교차분석(카이제곱 검정)


> ##### 2023년 6월 3일 토요일 ADP 실기 시험을 위한 공부(5/16~6/2)
##### 🔥 기본적인 데이터 전처리 및 머신러닝 파트는 주피터 노트북을 이용하여 공부하고 [깃허브](https://github.com/DMIS0126/ADP/tree/main/Private_Study)에 정리 완료
##### 🔥 통계분석은 이론 정리가 되어야 코드를 제대로 적을 수 있을 것 같다고 판단하여 블로그에 정리 시작

---


## ✐ 교차분석(카이제곱 검정)

### ⚑ 검정의 목적
* t-test와 ANOVA 분석은 종속변수가 연속형 변수였지만, 카이제곱 검정은 설명변수가 범주형 변수인 경우 사용하는 통계기법이다.
  * 데이터에서 각 범주에 따른 결과변수의 분포를 설명하거나
  * 범주형 변수가 두 개 이상인 경우 두 변수가 상관이 있는지를 검정하는 것이 목적이다.

### ⚑ 개념
* 교차분석은 교차표를 통해 각 셀의 관찰빈도와 기대빈도 간의 차이를 검정하는 기법이다.
  * 관찰빈도 : 자료로부터 얻은 빈도분포
  * 기대빈도 : 두 변수가 독립일 때 이론적으로 기대할 수 있는 빈도분포
  * 교차표 예시

    |구분|환자군|대조군|전체|
    |:--:|:--:|:--:|:--:|
    |과체중|25|15|40(40%)|
    |정상체중|10|50|60(60%)|
    |전체|35|65|100(100%)|
    <br>
  
    * 위 표에서 환자군이면서 과체중인 사람의 관찰빈도는 25명이지만, 기대빈도는 35*0.4=14명이다.
    * 교차분석은 이러한 관찰빈도와 기대빈도의 차이가 유의한 차이가 있는지를 카이제곱 통계량을 이용하여 검정하는 통계적 방법이다.
    
    > 💡 이때, 각 범주의 기대빈도는 5 이상이어야 한다.
    

### ⚑  카이제곱 검정
* 검정의 목적에 따라 다음과 같이 3가지의 검정으로 나눌 수 있다.

1. 적합성 검정
    * 각 범주에 따른 데이터의 빈도분포가 이론적으로 기대하는 분포를 따르는지를 검정하는 방법
    > ✅ 예시 
    >
    > 주사위를 굴렸을 때, 각 주사위의 값이 $\dfrac{1}{6}$의 확률이 맞는지 검정
    
      > ✅ 가설
    >
    > 타이타닉 데이터에서 성별 변수에 대한 분할표를 생성했을 때, 다음과 같이 가설을 세울 수 있다.
    > * 귀무가설(H0) : 타이타닉호의 생존자 중 남자의 비율이 50%, 여자의 비율이 50%이다.
    > * 대립가설(H1) : 타이타닉호의 생존자 중 남자의 비율이 50%, 여자의 비율이 50%이라고 할 수 없다.

2. 독립성 검정
    * 모집단이 두 개의 변수 A, B에 의해 범주화되었을 때, 이 두 변수들 사이의 관계가 독립인지 아닌지를 검정하는 방법
     > ✅ 예시 
    >
    > 환자의 비만유무와 대사성 질환의 유무가 주어졌을 때, 비만에 따른 질환 비율의 차이가 존재하는지 검정
    
      > ✅ 가설
    >
    > 타이타닉 데이터에서 좌석등급(class)과 생존 여부(survived)가 서로 독립인지 확인하기 위해 다음과 같이 가설을 세울 수 있다.
    > * 귀무가설(H0) : class 변수와 survived 변수는 서로 독립이다.
    > * 대립가설(H1) : class 변수와 survived 변수는 서로 독립이 아니다.

3. 동질성 검정
    * 동질성 검정은 모집단이 임의의 변수에 따라 R개의 속성으로 범주화되었을 때, R개의 부분 모집단에서 추출한 표본이 C개의 범주화된 집단의 분포가 서로 동일한지를 검정
    * 독립성 검정의 계산법과 같다.
       
      > ✅ 가설
      >
      > 타이타닉 데이터에서 좌석등급(class)과 생존 여부(survived)에 대하여 동질성을 확인하기 위해 다음과 같이 가설을 세울 수 있다.
      > * 귀무가설(H0) : class 변수의 분포는 survived 변수에 관계없이 동일하다.
      > * 대립가설(H1) : class 변수의 분포는 survived 변수에 관계없이 동일하지 않다.