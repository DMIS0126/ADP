# 밑바닥부터 시작하는 통계분석 (3) ANOVA

> ##### 2023년 6월 3일 토요일 ADP 실기 시험을 위한 공부(5/16~6/2)
##### 🔥 기본적인 데이터 전처리 및 머신러닝 파트는 주피터 노트북을 이용하여 공부하고 [깃허브](https://github.com/DMIS0126/ADP/tree/main/Private_Study)에 정리 완료
##### 🔥 통계분석은 이론 정리가 되어야 코드를 제대로 적을 수 있을 것 같다고 판단하여 블로그에 정리 시작

---

## ✐ ANOVA(ANalysis Of VAriance)
### ⚑ 개념
* 분산분석은 두 개 이상의 다수 집단 간 평균을 비교하는 통계분석이다.
  * 정확히는, 두 개 이상의 집단에서 그룹 평균 간 차이를 그룹 내 변동에 비교하여 살펴보는 통계분석 방법이다.
  * 집단 내에 분산(차이)보닫 다른 집단과의 분산(차이)이 더 크다면 유의하다고 할 수 있다는 개념을 갖고 있다.
  * 즉, 두 개 이상 집단들의 평균이 같은지를 통계적으로 검증하는 방법이다.
* 종속변수는 연속형이어야 하며, 독립변수는 범주형 변수이어야 한다.
* 개수에 따라 일원배치, 이원배치, 다원배치 분산분석으로 나누어진다.
  * 단일변량(일원+이원+다원배치 분산분석)
    * 독립변수 개수 : 1개, 2개, 3개 이상
    * 종속변수 개수 : 1개, 1개, 1개
  * 다변량 분산분석(MANOVA)
    * 독립변수 개수 : 1개 이상
    * 종속변수 개수 : 2개 이상
---
## ✐ 일원배치 분산분석(One-way ANOVA)
### ⚑ 개념
* 반응값에 대한 하나의 범주형 변수의 영향을 알아보기 위해 사용되는 검증 방법
* 모집단의 수에는 제한이 없으며, 각 표본의 수는 같지 않아도 된다.
* F 검정 통계량을 이용한다.
  > 💡 F 검정 통계량([관련 내용](https://angeloyeo.github.io/2020/02/29/ANOVA.html))
  >
  > F-value는 여러 표본 집단을 비교하기 위한 지표이며, 결론부터 말하자면 F-value는 앞서 배운 t-value와 거의 같은 의미를 갖는다. 
  > 다시 말해, t-value가 가졌던 의미와 마찬가지로 F-value도 차이 / 불확실도로 표본 그룹 간 차이를 숫자 하나로 서술하고 있는 것이다.
  > 
  > 여기서 F-value가 t-value와 약간 차이를 보이는 점은 그룹 간 차이 정도와 불확실도를 약간 변형해 사용한다는 점이다. F-value는 이들로 부터 계산한 분산의 비율을 척도로 이용한다.
  
  * F 검정 통계량은 분산의 비율값이므로 분산분석에서 집단 내 분산보다 집단 간 분산이 크다면 F값은 커지고 귀무가설을 기각할 확률이 높아진다.
  * 즉, k개의 집단의 차이가 있다고 할 확률이 높아진다.

### ⚑ 가정
* 집단의 측정치는 서로 독립적이며, 정규분포를 따른다.(정규성)
* 집단 측정치의 분산은 같다.(등분산성)


### ⚑ 단계
* 가설 수립
  * 귀무가설(H0) : k개의 집단 간 모평균에는 차이가 없다. 즉, 같다고 할 수 있다.
  * 대립가설(H1) : k개의 집단 간 모평균이 모두 같다고 할 수 없다.
* 정규성을 검정하고,
  * 정규성을 만족하는 경우 등분산성을 만족하는지 검정한다.
    * 등분산성을 만족하는 경우 `stats.f_oneway()`를 이용한다.
    * 등분산성을 만족하지 않는 경우 `pg.welck_anova(dv='양적 자료', Between = '집단 질적 자료', Data= )`를 이용한다.
  * 정규성을 만족하지 않는 경우 `stats.kruskal()`을 이용한다.
* 이후 사후검정을 진행한다.

### ⚑ 사후검정
* 분산분석의 결과 귀무가설이 기각되어 적어도 한 집단에서 평균의 차이가 있음이 통계적으로 증명되었을 경우, 어떤 집단들에 의해 평균의 차이가 존재하는지 알아보기 위해 실시한다.
* 사후분석의 종류로는 던칸의 MRT, vltudml LSD, 튜키의 HSD 등이 있다.

---

## ✐ 일원배치 분산분석(One-way ANOVA)
### ⚑ 개념
* 분산분석에서 하나의 종속변수(연속형)에 대한 두 개의 독립변수(범주형) A, B의 영향을 알아보기 위해 사용되는 검증 방법
  * 예시 : 성별과 학년에 따른 시험점수의 차이에 대해 통계적으로 검정
* 두 독립변수 A, B 사이에 상관관계가 있는지를 살펴보는 교호작용에 대한 검증이 반드시 진행되어야 한다.
  > 💡 교호작용
  > 
  > 두 독립변수의 범주들의 조합으로 인해 반응변수에 미치는 특별한 영향
* F 검정 통계량을 이용한다.

### ⚑ 가정
* 집단의 측정치는 서로 독립적이며, 정규분포를 따른다.(정규성)
* 집단 측정치의 분산은 같다.(등분산성)


### ⚑ 가설
* 가설 수립(이원배치 분산분석의 가설은 총 6가지이다.)
  * 귀무가설1(H0) : a와 b변수의 상호작용 효과(교호작용, interaction)가 없다.
  * 귀무가설2(H0) : a변수에 따른 종속변수의 값에는 차이가 없다.
  * 귀무가설3(H0) : b변수에 따른 종속변수의 값에는 차이가 없다.
  * 대립가설1(H1) : a와 b변수의 상호작용 효과(교호작용, interaction)가 있다.
  * 대립가설2(H1) : a변수에 따른 종속변수의 값에는 차이가 있다.
  * 대립가설3(H1) : b변수에 따른 종속변수의 값에는 차이가 있다.

### ⚑ 단계
* 이원배치 분산분석도 일원배치 분산분석과 단계는 같다.
* 하지만 독립변수(범주형)의 level이 2개라는 점에서 가설의 차이가 있으므로 검정과 해설에 유의해야 한다.


### ⚑ 사후검정
* 분산분석의 결과 귀무가설이 기각되어 적어도 한 집단에서 평균의 차이가 있음이 통계적으로 증명되었을 경우, 어떤 집단들에 의해 평균의 차이가 존재하는지 알아보기 위해 실시한다.
* 사후분석의 종류로는 던칸의 MRT, vltudml LSD, 튜키의 HSD 등이 있다.




---